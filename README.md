# Notion Light Backend

Pet-проект: упрощённый аналог Notion на FastAPI.

---

## Для чего этот проект

Проект задуман как учебный и практический пример **backend-приложения на FastAPI с “реальной” доменной логикой**, а не просто CRUD по одной табличке.  

Он помогает прокачать:

- проектирование структуры БД (страницы, теги, версии)
- работу с SQLAlchemy 2.x и Alembic (модели + миграции)
- построение REST API с вложенными сущностями и фильтрацией
- работу с JSON-полями (контент страниц)
- организацию слоёв `models / schemas / crud / api`
- контейнеризацию (Docker + docker-compose)
- базовый CI на GitHub Actions

Это хороший пет-проект для портфолио: он показывает умение строить архитектуру, работать с БД и инфраструктурой, а не только писать “hello world”.

---

## Что реализовано функционально

### Страницы

- создание, получение, редактирование, архивирование страниц  
- иерархия «страница внутри страницы» через `parent_id`  
- хранение содержимого страницы в JSON (структура блоков)

### Теги

- привязка нескольких тегов к странице  
- автоматическое создание новых тегов при использовании  
- фильтрация списка страниц по тегам

### История версий

- при каждом изменении страницы создаётся версия (snapshot)  
- просмотр списка версий для конкретной страницы  
- откат к любой версии с созданием новой актуальной версии

### Архив (soft delete)

- страницы не удаляются физически, а помечаются `is_archived = true`  
- обычный список страниц скрывает архивированные записи  

### Публичные ссылки (share link)

- генерация случайного `slug` и включение публичного доступа  
- `GET /public/{slug}` возвращает страницу **только для чтения**  
- возможность в любой момент отключить публичный доступ

---

## Технологический стек

- **Язык:** Python 3.12  
- **Web-фреймворк:** FastAPI  
- **ORM:** SQLAlchemy 2.x  
- **База данных:** PostgreSQL  
- **Миграции:** Alembic  
- **Схемы и валидация:** Pydantic v2  
- **Инфраструктура:** Docker, docker-compose  
- **CI:** GitHub Actions  

Все фиксированные версии библиотек лежат в `requirements.txt`.

---

##Стуктура проекта
app/
  core/       # настройки приложения (конфиг, env)
  db/         # база данных: Base, SessionLocal, engine
  models/     # SQLAlchemy-модели (Page, Tag, PageVersion, связи)
  schemas/    # Pydantic-схемы (DTO для запросов/ответов)
  crud/       # бизнес-логика и работа с БД
  api/        # маршруты FastAPI (v1, deps, роутеры)
alembic/      # миграции БД
.github/      # GitHub Actions (CI)
Dockerfile    # Docker-образ backend’а
docker-compose.yml # Поднятие backend + Postgres
requirements.txt   # зависимости проекта

---

## Быстрый старт (локально, без Docker)

### 1. Клонирование репозитория и установка зависимостей

```bash
git clone <url-репозитория> notion-light-backend
cd notion-light-backend

python -m venv .venv
source .venv/bin/activate      # Windows: .venv\Scripts\activate
pip install --upgrade pip
pip install -r requirements.txt
